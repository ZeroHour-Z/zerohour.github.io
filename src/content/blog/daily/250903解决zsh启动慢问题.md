---
title: 解决 zsh 启动缓慢问题
publishDate: 2025-09-03
description: 'zsh 启动加速'
tags:
  - zsh
  - bash
  - shell
heroImage: { src: './250823.jpg', color: '#4891B2' }
---

## 问题
每次打开 zsh 终端，启动都需要一段时间，很恶心

## 解决
conda 和 nvm 初始化很慢，所以启动终端的时候先不加载，第一次使用的再加载

## 代码
### conda 
```bash
export CONDA_PATH=($HOME/miniconda3/bin/conda)
conda() {
    unfunction conda
    for conda_path in $CONDA_PATH; do
        if [[ -f $conda_path ]]; then
            eval "$($conda_path shell.zsh hook)"
            conda $@
            return
        fi
    done
    echo "No conda installation found in $CONDA_PATH"
}
```
### nvm
```bash
function nvm ()
{
    unfunction nvm
    export NVM_DIR="$HOME/.nvm"
    [ -s "$NVM_DIR/nvm.sh" ] && \\. "$NVM_DIR/nvm.sh"
    [ -s "$NVM_DIR/bash_completion" ] && \\. "$NVM_DIR/bash_completion"
    nvm $@
}
```

